!function(a){"use strict";var c={},e=a.crypto||a.msCrypto,s=e?e.subtle||e.webkitSubtle:void 0;function l(e,t,n,o,i,r,d){e===t?((e=document.createElement("script")).innerHTML=n,r&&(e.onload=r),i.getElementsByTagName("head")[0].appendChild(e)):d?(console.log("'"+o+"' 파일의 해시값 오류로 결제원 WEB서버에서 다운로드 합니다."),f(o,i,r)):(console.log("'"+o+"' 파일의 해시값 오류로 Backup CDN서버에서 다운로드 합니다."),c.getValidJSForNonWebStandardComplianceBroswer(t,o,i,r,!0))}function f(e,t,n){var o=document.createElement("script");o.src="https://4user.yeskey.or.kr/v1/"+e+"?2024-03-28T05_56_38.549Z",o.charset="utf-8",o.type="text/javascript",n&&(o.onload=n),t&&t.body&&t.body.appendChild(o)}function m(e){e=new Uint8Array(e);return btoa(String.fromCharCode.apply(null,e))}c.getValidJSForWebStandardComplianceBroswer=function(e,t,n,o,i,r){var d=document.createElement("script");d.id=e,d.type="text/javascript",d.src=(r?"https://sdk2.yeskey.or.kr":"https://sdk.yeskey.or.kr")+"/v1/"+n+"?2024-03-28T05_56_38.549Z",d.charset="utf-8",d.integrity="sha256-"+t,d.crossOrigin="anonymous",i&&(d.onload=i),d.onerror=function(){r?(console.log("'"+n+"' 파일의 해시값 오류로 결제원 WEB서버에서 다운로드 합니다."),f(n,o,i)):c.getValidJSForWebStandardComplianceBroswer(e,t,n,o,i,!0)},o&&o.body&&o.body.appendChild(d)},c.getValidJSForNonWebStandardComplianceBroswer=function(t,n,o,i,r){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(d.readyState===d.DONE){if(""==d.responseText){if(r)return console.log("방화벽 등으로 responseText가 없음 - 결제원 웹서버로 시도"),void f(n,o,i);console.log("방화벽 등으로 responseText가 없음 - 백업 CDN으로 재시도"),c.getValidJSForNonWebStandardComplianceBroswer(t,n,o,i,!0)}var e=new Uint8Array(function(e,t){t=t||1/0;for(var n,o=e.length,i=null,r=[],d=0;d<o;d++){if(55295<(n=e.charCodeAt(d))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&r.push(239,191,189);continue}if(d+1===o){-1<(t-=3)&&r.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&r.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(-1<(t-=3)&&r.push(239,191,189),i=null);if(n<128){if(--t<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}(d.responseText));if(a.crypto)try{s.digest("SHA-256",e).then(function(e){l(m(e),t,d.responseText,n,o,i,r)})}catch(e){console.log("WebCrypto 객체에 subtle 또는 webkitSubtle 객체에 digest 함수 없음!!"),f(n,o,i)}else try{s.digest("SHA-256",e).oncomplete=function(e){l(m(e.target.result),t,d.responseText,n,o,i,r)}}catch(e){console.log("WebCrypto 객체에 subtle 또는 webkitSubtle 객체에 digest 함수 없음!!"),f(n,o,i)}}},d.open("GET",(r?"https://sdk2.yeskey.or.kr":"https://sdk.yeskey.or.kr")+"/v1/"+n+"?2024-03-28T05_56_38.549Z"),d.send()},a.FinCert||(a.FinCert={}),a.FinCert.loadUtil=c}(window),function(){function n(n){var o;console.log("SRI Hash 지원 여부 : "+n),document.getElementById("finCertSdkIframe")||((o=document.createElement("iframe")).style.position="fixed",o.style.zIndex=3000001,o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",o.style.backgroundColor="transparent",o.style.display="none",o.title="금융인증서비스 개인",o.frameBorder=0,o.setAttribute("id","finCertSdkIframe"),o.onload=function(){var e=o.contentWindow,t=e.document,e=(e.addEventListener("message",function(e){"clientFrameJsLoadingFinished"===e.data&&u()}),t.createElement("iframe"));e.src=d+"?2024-03-28T05_56_38.549Z&sriHash="+n,e.style.top="0px",e.style.left="-1px",e.style.width="1px",e.style.height="1px",e.tabIndex=-1,e.frameBorder=0,e.setAttribute("id","finCertSdkIframeTag"),t&&t.body&&t.body.appendChild(e),n?r.getValidJSForWebStandardComplianceBroswer("finCertUIScriptTag",c,"fincert-ui.js",t,!1):r.getValidJSForNonWebStandardComplianceBroswer(c,"fincert-ui.js",t,!1),n?r.getValidJSForWebStandardComplianceBroswer("finCertSdkScriptTag",a,"sdk.js",t,!1):r.getValidJSForNonWebStandardComplianceBroswer(a,"sdk.js",t,!1)},i.document&&i.document.body&&i.document.body.appendChild(o))}var i,e,o,r,d,a,c,s,l,f,m,u;"undefined"==typeof FinCert&&(FinCert={}),i=window,e=FinCert,o=e.Sdk=e.Sdk||{},r=e.loadUtil=e.loadUtil||{},d="https://4user.yeskey.or.kr/fincert/web/v1/iframe.htm",a="GlWlu8ENjRsebSpYgYv4rGpnzDKoTzIrJ5MY/78Tlfc=",f=l=s=!(c="8VmEu17Dm2HVgvrGhGsjqeePH0XIBi6bhayFfUmRyAs="),m=i.crypto||i.msCrypto,o.init||(o.waitUntilLoadingCompleted=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow&&t.contentWindow.FinCert&&t.contentWindow.FinCert.Interface&&t.contentWindow.FinCert.Sdk?(console.log("loading fincert sdk is finished."),l=!0,o.init(e)):(console.log("wait until loading fincert sdk finished."),initLoadingTimerId=setTimeout(o.waitUntilLoadingCompleted,100,e))},o.init=function(e){if(!m){var t={message:"미지원 브라우저 입니다. 다른 브라우저를 사용하시기 바랍니다.",cause:null,code:900001};if(e&&e.fail)return void e.fail(t);throw t}if(l)f&&document.getElementById("finCertSdkIframe").contentWindow.FinCert.Interface.setClientFrameJsLoadingFinished(),document.getElementById("finCertSdkIframe").contentWindow.FinCert.Sdk.init(e);else{if(s){t={message:"이미 금융인증서비스 실행중입니다. 잠시 기다리세요. (init)",cause:null,code:100008};if(e&&e.fail)return void e.fail(t);throw t}s=!0,o.waitUntilLoadingCompleted(e)}},o.issue=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.issue(e)},o.renew=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.renew(e)},o.regSimpleKeyToken=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.regSimpleKeyToken(e)},o.sign=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.sign(e)},o.signWithoutUI=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.signWithoutUI(e)},o.myDataSign=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.myDataSign(e)},o.myDataSignWithoutUI=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.myDataSignWithoutUI(e)},o.manage=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.manage(e)},o.checkCloudConn=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.checkCloudConn(e)},o.setSubAuthData=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.setSubAuthData(e)},o.getCertInfoList=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getCertInfoList(e)},o.getUserInfo=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getUserInfo(e)},o.setAuthData=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.setAuthData(e)},o.getCertInfo=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getCertInfo(e)},o.getSignerCertFromSignedVal=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getSignerCertFromSignedVal(e)},o.isOverseasIp=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.isOverseasIp(e)},o.registerDevice=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.registerDevice(e)},o.cancelDeviceRegister=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.cancelDeviceRegister(e)},o.getRegisterDeviceStatus=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getRegisterDeviceStatus(e)},o.disconnectCloudConn=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.disconnectCloudConn(e)},o.convertBase64UrlToBase64=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.convertBase64UrlToBase64(e)},o.convertBase64ToBase64Url=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.convertBase64ToBase64Url(e)},o.signEnvelop=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.signEnvelop(e)},o.makeAutoConnInfo=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.makeAutoConnInfo(e)},o.setAutoConnInfo=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.setAutoConnInfo(e)},o.getAvailableAuthMethod=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getAvailableAuthMethod(e)},o.abort=function(e){var t=document.getElementById("finCertSdkIframe");if(t)t.contentWindow.FinCert.Sdk.abort(e);else if(e&&e.callback)try{e.callback()}catch(e){console.warn("callback 함수를 호출하는 동안 에러가 발생하였습니다. 확인하시기 바랍니다."),console.warn(e.message)}}),u=function(){console.log("clientFrame.js 로딩 완료"),f=!0,l&&document.getElementById("finCertSdkIframe").contentWindow.FinCert.Interface.setClientFrameJsLoadingFinished()},function e(){var t;i.document&&"complete"!==i.document.readyState?(console.log("document.readyState : "+i.document.readyState),setTimeout(e,50)):m&&((t=document.createElement("link")).type="text/css",t.rel="stylesheet",t.href="https://4user.yeskey.or.kr/v1/must-integrity-fail.css",t.integrity="sha256-MUSTFAIL",t.crossOrigin="anonymous",t.onload=n.bind(this,!1),t.onerror=n.bind(this,!0),i.document.head.appendChild(t))}()}();